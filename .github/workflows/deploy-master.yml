name: deploy-master
on:
    push:
        branches: [master]
jobs:
    deploy:
        runs-on: self-hosted-novum
        container: docker.tuenti.io/service-inf/web-builder:pptr10.4-1.0.2
        steps:
            - uses: actions/checkout@v2
            - uses: amondnet/vercel-action@master
              with:
                  github-token: ${{ secrets.GITHUB_TOKEN }} # needed to allow comments on prs
                  vercel-token: ${{ secrets.VERCEL_TOKEN }} # Required
                  vercel-org-id: ${{ secrets.MISTICA_WEB_VERCEL_ORG_ID}} #Required
                  vercel-project-id: ${{ secrets.MISTICA_WEB_VERCEL_PROJECT_ID}} #Required
                  vercel-project-name: mistica-web # Not requried by the docs, but the action fails if not specified. See https://github.com/amondnet/vercel-action/issues/30#issuecomment-678608424
                  vercel-args: '--prod'
                  working-directory: ./
